<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mo x Jarvis — Team Pulse</title>
  <style>
    :root { --bg:#0b1020; --card:#121a33; --text:#eaf0ff; --muted:#9fb1d9; --ok:#17c964; --work:#f5a524; --block:#f31260; }
    *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(160deg,#0b1020,#111a38);color:var(--text)}
    .wrap{max-width:980px;margin:40px auto;padding:0 16px}
    h1{margin:0 0 8px;font-size:34px} p{color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:14px;margin-top:22px}
    .card{background:var(--card);border:1px solid #23315f;border-radius:16px;padding:16px;box-shadow:0 6px 20px rgba(0,0,0,.25)}
    .name{font-size:20px;font-weight:700}.role{font-size:13px;color:var(--muted);margin-bottom:10px}
    .status{display:inline-block;padding:5px 10px;border-radius:999px;font-size:12px;font-weight:700}
    .ok{background:rgba(23,201,100,.16);color:var(--ok)} .work{background:rgba(245,165,36,.16);color:var(--work)} .block{background:rgba(243,18,96,.16);color:var(--block)}
    .task{margin-top:10px;font-size:14px;line-height:1.4}
    .meta{margin-top:28px;font-size:12px;color:var(--muted)}
    code{background:#1b2752;padding:2px 6px;border-radius:6px;color:#c8d6ff}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Team Pulse</h1>
    <p>Live snapshot of who’s doing what. Auto-refreshes every 60s.</p>
    <div id="grid" class="grid"></div>
    <div class="meta" id="meta">Loading status...</div>
  </div>

<script>
const statusClass = (s='working') => ({active:'ok',working:'work',blocked:'block',planning:'work'}[s] || 'work');

async function loadStatus(){
  try {
    const res = await fetch(`status.json?t=${Date.now()}`);
    const data = await res.json();
    const grid = document.getElementById('grid');
    grid.innerHTML = data.members.map(m => `
      <div class="card">
        <div class="name">${m.emoji || '•'} ${m.name}</div>
        <div class="role">${m.role}</div>
        <span class="status ${statusClass(m.status)}">${m.status_label || m.status}</span>
        <div class="task"><strong>Now:</strong> ${m.now}</div>
      </div>
    `).join('');

    document.getElementById('meta').innerHTML =
      `Last update: <code>${data.updated_at}</code> · Source: <code>status.json</code>`;
  } catch (e) {
    document.getElementById('meta').textContent = 'Status feed unavailable right now.';
  }
}

loadStatus();
setInterval(loadStatus, 60000);
</script>
</body>
</html>
